generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Post {
  id            String   @id @default(cuid())
  slug          String   @unique
  title         String
  excerpt       String
  content       String
  coverImageUrl String?
  isFeatured    Boolean  @default(false)
  publishedAt   DateTime @default(now())
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([slug])
}

model Season {
  id        String   @id @default(cuid())
  code      String   @unique
  name      String
  startDate DateTime
  endDate   DateTime
  results   Result[]
}

model Result {
  id        String   @id @default(cuid())
  date      DateTime
  venue     String
  teamName  String
  placement Int
  score     Int
  note      String?
  seasonId  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  season    Season   @relation(fields: [seasonId], references: [id])

  @@index([seasonId, date])
}

model Member {
  id          String   @id @default(cuid())
  displayName String   @unique
  nickname    String?
  gender      Gender   @default(MALE)
  role        String?
  specialties String[]
  bio         String?
  avatarUrl   String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Album {
  id               String   @id @default(cuid())
  title            String
  dateTaken        DateTime
  cloudinaryFolder String
  coverPublicId    String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  photos           Photo[]
}

model Photo {
  id                 String   @id @default(cuid())
  cloudinaryPublicId String
  caption            String?
  sortOrder          Int      @default(0)
  albumId            String
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  album              Album    @relation(fields: [albumId], references: [id])

  @@unique([albumId, cloudinaryPublicId])
  @@index([albumId, sortOrder])
}

// --- 5. PLAYLISTY ---
model Playlist {
  id          String   @id @default(cuid())
  title       String
  description String?  // <-- PŘIDAT TOTO (otazník znamená, že může být prázdné)
  spotifyUrl  String   @unique
  isActive    Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

enum Gender {
  MALE
  FEMALE
}
