generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// --- 1. AKTUALITY ---
model Post {
  id            String   @id @default(cuid())
  slug          String   @unique
  title         String
  excerpt       String
  content       String
  coverImageUrl String?
  isFeatured    Boolean  @default(false)
  publishedAt   DateTime @default(now())
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([slug])
}

// --- 2. VÝSLEDKY ---
model Season {
  id        String   @id @default(cuid())
  code      String   @unique
  name      String
  startDate DateTime
  endDate   DateTime
  results   Result[]
}

model Result {
  id        String   @id @default(cuid())
  date      DateTime
  venue     String
  teamName  String
  placement Int
  score     Int
  note      String?
  seasonId  String
  season    Season   @relation(fields: [seasonId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// --- 3. TÝM ---
model Member {
  id          String   @id @default(cuid())
  displayName String
  nickname    String?
  gender      Gender   @default(MALE)
  role        String?
  specialties String[]
  bio         String?
  avatarUrl   String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

enum Gender {
  MALE
  FEMALE
}

// --- 4. GALERIE ---
model Album {
  id               String   @id @default(cuid())
  title            String
  dateTaken        DateTime
  cloudinaryFolder String
  coverPublicId    String?
  photos           Photo[]
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model Photo {
  id                 String  @id @default(cuid())
  cloudinaryPublicId String
  caption            String?
  sortOrder          Int     @default(0)
  albumId            String
  album              Album   @relation(fields: [albumId], references: [id])
}